{"code":"import { __assign } from \"tslib\";\r\nimport { VENDURE_AUTH_TOKEN_NAME } from '../helpers/constants';\r\nimport { cookieOptions } from '../helpers';\r\nexport var tokenExtension = {\r\n    name: 'tokenExtension',\r\n    hooks: function (req, res) {\r\n        return {\r\n            beforeCreate: function (_a) {\r\n                var configuration = _a.configuration;\r\n                return (__assign(__assign({}, configuration), { auth: {\r\n                        getAuthCookie: function () { return req.cookies[VENDURE_AUTH_TOKEN_NAME]; },\r\n                        setAuthCookie: function (token) {\r\n                            if (!token) {\r\n                                // eslint-disable-next-line no-param-reassign\r\n                                delete req.cookies[VENDURE_AUTH_TOKEN_NAME];\r\n                                return;\r\n                            }\r\n                            res.cookie(VENDURE_AUTH_TOKEN_NAME, token, cookieOptions);\r\n                        },\r\n                        removeAuthCookie: function () {\r\n                            // Remove cookie by expiring it immediately\r\n                            res.cookie(VENDURE_AUTH_TOKEN_NAME, '', { expires: new Date(Date.now()) });\r\n                        }\r\n                    } }));\r\n            }\r\n        };\r\n    }\r\n};\r\n//# sourceMappingURL=token.js.map","references":["/home/eb/projs/eecommerce.web/ecommerce.web/node_modules/@vue-storefront/core/lib/src/index.d.ts","/home/eb/projs/eecommerce.web/ecommerce.web/packages/api-client/src/helpers/constants.ts","/home/eb/projs/eecommerce.web/ecommerce.web/packages/api-client/src/helpers/index.ts"],"map":"{\"version\":3,\"file\":\"token.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../src/extensions/token.ts\"],\"names\":[],\"mappings\":\";AACA,OAAO,EAAE,uBAAuB,EAAE,MAAM,sBAAsB,CAAC;AAC/D,OAAO,EAAE,aAAa,EAAE,MAAM,YAAY,CAAC;AAE3C,MAAM,CAAC,IAAM,cAAc,GAAuB;IAChD,IAAI,EAAE,gBAAgB;IACtB,KAAK,EAAE,UAAC,GAAG,EAAE,GAAG;QACd,OAAO;YACL,YAAY,EAAE,UAAC,EAAiB;oBAAf,aAAa,mBAAA;gBAAO,OAAA,uBAChC,aAAa,KAChB,IAAI,EAAE;wBACJ,aAAa,EAAE,cAAM,OAAA,GAAG,CAAC,OAAO,CAAC,uBAAuB,CAAC,EAApC,CAAoC;wBACzD,aAAa,EAAE,UAAC,KAAK;4BACnB,IAAI,CAAC,KAAK,EAAE;gCACV,6CAA6C;gCAC7C,OAAO,GAAG,CAAC,OAAO,CAAC,uBAAuB,CAAC,CAAC;gCAC5C,OAAO;6BACR;4BACD,GAAG,CAAC,MAAM,CAAC,uBAAuB,EAAE,KAAK,EAAE,aAAa,CAAC,CAAC;wBAC5D,CAAC;wBACD,gBAAgB,EAAE;4BAChB,2CAA2C;4BAC3C,GAAG,CAAC,MAAM,CAAC,uBAAuB,EAAE,EAAE,EAAE,EAAE,OAAO,EAAE,IAAI,IAAI,CAAC,IAAI,CAAC,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC;wBAC7E,CAAC;qBACF,IACD;YAjBmC,CAiBnC;SACH,CAAC;IACJ,CAAC;CACF,CAAC\"}","dtsmap":{"name":"/home/eb/projs/eecommerce.web/ecommerce.web/packages/api-client/lib/extensions/token.d.ts.map","writeByteOrderMark":false,"text":"{\"version\":3,\"file\":\"token.d.ts\",\"sourceRoot\":\"\",\"sources\":[\"../../src/extensions/token.ts\"],\"names\":[],\"mappings\":\"AAAA,OAAO,EAAE,kBAAkB,EAAE,MAAM,sBAAsB,CAAC;AAI1D,eAAO,MAAM,cAAc,EAAE,kBAwB5B,CAAC\"}"},"dts":{"name":"/home/eb/projs/eecommerce.web/ecommerce.web/packages/api-client/lib/extensions/token.d.ts","writeByteOrderMark":false,"text":"import { ApiClientExtension } from '@vue-storefront/core';\r\nexport declare const tokenExtension: ApiClientExtension;\r\n//# sourceMappingURL=token.d.ts.map"}}
