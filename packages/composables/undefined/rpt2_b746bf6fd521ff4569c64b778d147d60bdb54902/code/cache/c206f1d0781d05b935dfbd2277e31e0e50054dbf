{"code":"import { __assign } from \"tslib\";\r\nimport { ITEMS_PER_PAGE, ROOT_COLLECTION } from '../helpers';\r\n// TODO: Implement search by criteria\r\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\nvar getGrouped = function (searchResult, criteria) {\r\n    var _a, _b;\r\n    if (!((_a = searchResult === null || searchResult === void 0 ? void 0 : searchResult.data) === null || _a === void 0 ? void 0 : _a.facets))\r\n        return [];\r\n    var facets = (_b = searchResult === null || searchResult === void 0 ? void 0 : searchResult.data) === null || _b === void 0 ? void 0 : _b.facets;\r\n    return [{\r\n            id: '1',\r\n            label: 'Attributes',\r\n            count: null,\r\n            options: facets === null || facets === void 0 ? void 0 : facets.map(function (facet) { return ({\r\n                type: 'attribute',\r\n                id: facet.facetValue.id,\r\n                attrName: facet.facetValue.name,\r\n                value: facet.facetValue.code,\r\n                selected: false,\r\n                count: facet.count\r\n            }); })\r\n        }];\r\n};\r\nvar getSortOptions = function (searchResult) {\r\n    var _a;\r\n    // TODO: Fix this with custom type/interface. In Vendure `sort: SearchResultSortParameter` while in VSF Core `sort: string`\r\n    var sortName = searchResult.input.sort.price;\r\n    var options = [\r\n        { type: 'sort', id: 'NAME_ASC', value: 'Name from A to Z', count: null },\r\n        { type: 'sort', id: 'NAME_DESC', value: 'Name from Z to A', count: null },\r\n        { type: 'sort', id: 'PRICE_ASC', value: 'Price from low to high', count: null },\r\n        { type: 'sort', id: 'PRICE_DESC', value: 'Price from high to low', count: null }\r\n    ].map(function (o) { return (__assign(__assign({}, o), { selected: o.id === sortName })); });\r\n    var selected = (_a = options.find(function (o) { return o.id === sortName; })) === null || _a === void 0 ? void 0 : _a.id;\r\n    return {\r\n        options: options,\r\n        selected: selected\r\n    };\r\n};\r\nvar getProducts = function (searchResult) {\r\n    var _a, _b;\r\n    return ((_b = (_a = searchResult === null || searchResult === void 0 ? void 0 : searchResult.data) === null || _a === void 0 ? void 0 : _a.products) === null || _b === void 0 ? void 0 : _b.length) && searchResult.data.products.map(function (product) { return ({\r\n        _id: product.productId,\r\n        _variantId: product.productVariantId,\r\n        _description: product.description,\r\n        _categoriesRef: product.collectionIds,\r\n        name: product.productName,\r\n        sku: product.sku,\r\n        images: [product.productAsset.preview],\r\n        price: {\r\n            original: product.price.min,\r\n            current: product.priceWithTax.min\r\n        },\r\n        slug: product.slug\r\n    }); });\r\n};\r\nvar getPagination = function (searchResult) {\r\n    var _a, _b, _c, _d, _e, _f;\r\n    if (!((_a = searchResult.data) === null || _a === void 0 ? void 0 : _a.total)) {\r\n        return {\r\n            totalPages: 1,\r\n            totalItems: 1,\r\n            itemsPerPage: 1,\r\n            pageOptions: [1],\r\n            currentPage: 1\r\n        };\r\n    }\r\n    return {\r\n        totalPages: Math.ceil(((_b = searchResult === null || searchResult === void 0 ? void 0 : searchResult.data) === null || _b === void 0 ? void 0 : _b.total) / ((_c = searchResult === null || searchResult === void 0 ? void 0 : searchResult.data) === null || _c === void 0 ? void 0 : _c.itemsPerPage)) || 1,\r\n        totalItems: ((_d = searchResult === null || searchResult === void 0 ? void 0 : searchResult.data) === null || _d === void 0 ? void 0 : _d.total) || 0,\r\n        itemsPerPage: (_e = searchResult === null || searchResult === void 0 ? void 0 : searchResult.input) === null || _e === void 0 ? void 0 : _e.take,\r\n        pageOptions: (_f = searchResult === null || searchResult === void 0 ? void 0 : searchResult.data) === null || _f === void 0 ? void 0 : _f.perPageOptions,\r\n        currentPage: 1\r\n    };\r\n};\r\nvar getBreadcrumbsFromSlug = function (searchResult, slug) {\r\n    var _a, _b, _c, _d;\r\n    var categoryFromSlug = (_b = (_a = searchResult === null || searchResult === void 0 ? void 0 : searchResult.data) === null || _a === void 0 ? void 0 : _a.categories) === null || _b === void 0 ? void 0 : _b.find(function (category) { return category.collection.slug === slug; });\r\n    var breadcrumbsFromSlug = (_d = (_c = categoryFromSlug === null || categoryFromSlug === void 0 ? void 0 : categoryFromSlug.collection) === null || _c === void 0 ? void 0 : _c.breadcrumbs) === null || _d === void 0 ? void 0 : _d.map(function (breadcrumb) { return ({\r\n        text: (breadcrumb === null || breadcrumb === void 0 ? void 0 : breadcrumb.name) === ROOT_COLLECTION ? 'Home' : breadcrumb === null || breadcrumb === void 0 ? void 0 : breadcrumb.name,\r\n        link: (breadcrumb === null || breadcrumb === void 0 ? void 0 : breadcrumb.slug) === ROOT_COLLECTION ? '/' : breadcrumb === null || breadcrumb === void 0 ? void 0 : breadcrumb.slug\r\n    }); });\r\n    return breadcrumbsFromSlug;\r\n};\r\nvar getTree = function (category) {\r\n    if (!category || !category.id)\r\n        return null;\r\n    return {\r\n        label: category.name,\r\n        slug: category.slug,\r\n        id: category.id,\r\n        isCurrent: false,\r\n        items: category.children.map(function (child) { return getTree(child); })\r\n    };\r\n};\r\nvar getAgnosticSearchResult = function (searchResultValue) {\r\n    var data = searchResultValue.data, input = searchResultValue.input;\r\n    return {\r\n        data: {\r\n            products: data === null || data === void 0 ? void 0 : data.items,\r\n            categories: data === null || data === void 0 ? void 0 : data.collections,\r\n            facets: data === null || data === void 0 ? void 0 : data.facetValues,\r\n            total: data === null || data === void 0 ? void 0 : data.totalItems,\r\n            perPageOptions: ITEMS_PER_PAGE,\r\n            itemsPerPage: input === null || input === void 0 ? void 0 : input.take\r\n        },\r\n        input: __assign(__assign({}, input), { \r\n            // In Vendure `sort:{ name: string, price: string }` while in VSF Core `sort: string`\r\n            sort: input.sort })\r\n    };\r\n};\r\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\nvar getAll = function (params, criteria) {\r\n    return [];\r\n};\r\n// Not used in favor of getBreadcrumbsBySlug\r\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\nvar getBreadcrumbs = function (params) {\r\n    return [];\r\n};\r\n// Not used in favor of getTree\r\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\nvar getCategoryTree = function (params) {\r\n    return {\r\n        label: '',\r\n        slug: '',\r\n        items: null,\r\n        isCurrent: false,\r\n        count: 0\r\n    };\r\n};\r\nexport var facetGetters = {\r\n    getSortOptions: getSortOptions,\r\n    getGrouped: getGrouped,\r\n    getAll: getAll,\r\n    getProducts: getProducts,\r\n    getCategoryTree: getCategoryTree,\r\n    getBreadcrumbs: getBreadcrumbs,\r\n    getPagination: getPagination,\r\n    getBreadcrumbsFromSlug: getBreadcrumbsFromSlug,\r\n    getTree: getTree,\r\n    getAgnosticSearchResult: getAgnosticSearchResult\r\n};\r\n//# sourceMappingURL=facetGetters.js.map","references":["/home/eb/projs/eecommerce.web/ecommerce.web/node_modules/@vue-storefront/core/lib/src/index.d.ts","/home/eb/projs/eecommerce.web/ecommerce.web/node_modules/@vue-storefront/vendure-api/lib/index.d.ts","/home/eb/projs/eecommerce.web/ecommerce.web/packages/composables/src/types/index.ts","/home/eb/projs/eecommerce.web/ecommerce.web/packages/composables/src/helpers/index.ts"],"map":"{\"version\":3,\"file\":\"facetGetters.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../src/getters/facetGetters.ts\"],\"names\":[],\"mappings\":\"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\"}","dtsmap":{"name":"/home/eb/projs/eecommerce.web/ecommerce.web/packages/composables/lib/getters/facetGetters.d.ts.map","writeByteOrderMark":false,"text":"{\"version\":3,\"file\":\"facetGetters.d.ts\",\"sourceRoot\":\"\",\"sources\":[\"../../src/getters/facetGetters.ts\"],\"names\":[],\"mappings\":\"AAAA,OAAO,EACL,aAAa,EACb,iBAAiB,EACjB,oBAAoB,EAIpB,kBAAkB,EAEnB,MAAM,sBAAsB,CAAC;AAC9B,OAAO,KAAK,EAAE,UAAU,EAAE,mBAAmB,EAAc,WAAW,EAAE,cAAc,EAA6B,MAAM,6BAA6B,CAAC;AACvJ,OAAO,EAA0B,oBAAoB,EAAE,iBAAiB,EAAE,MAAM,UAAU,CAAC;AAG3F,UAAU,qBAAsB,SAAQ,aAAa,CAAC,oBAAoB,EAAE,mBAAmB,CAAC;IAC9F,OAAO,EAAE,CAAC,QAAQ,EAAE,UAAU,KAAK,oBAAoB,GAAG,IAAI,CAAC;IAC/D,sBAAsB,EAAE,CAAC,YAAY,EAAE,iBAAiB,CAAC,oBAAoB,CAAC,EAAE,IAAI,EAAE,MAAM,KAAK,kBAAkB,EAAE,CAAA;IACrH,uBAAuB,EAAE,CAAC,iBAAiB,EAAE,iBAAiB,CAAC,cAAc,EAAE,WAAW,CAAC,KAAK,iBAAiB,CAAC,oBAAoB,CAAC,CAAC;CACzI;AA6ID,eAAO,MAAM,YAAY,EAAE,qBAW1B,CAAC\"}"},"dts":{"name":"/home/eb/projs/eecommerce.web/ecommerce.web/packages/composables/lib/getters/facetGetters.d.ts","writeByteOrderMark":false,"text":"import { FacetsGetters, FacetSearchResult, AgnosticCategoryTree, AgnosticBreadcrumb } from '@vue-storefront/core';\r\nimport type { Collection, FacetSearchCriteria, SearchInput, SearchResponse } from '@vue-storefront/vendure-api';\r\nimport { AgnosticSearchResult, SearchResultValue } from '../types';\r\ninterface ExtendedSearchGetters extends FacetsGetters<AgnosticSearchResult, FacetSearchCriteria> {\r\n    getTree: (category: Collection) => AgnosticCategoryTree | null;\r\n    getBreadcrumbsFromSlug: (searchResult: FacetSearchResult<AgnosticSearchResult>, slug: string) => AgnosticBreadcrumb[];\r\n    getAgnosticSearchResult: (searchResultValue: SearchResultValue<SearchResponse, SearchInput>) => FacetSearchResult<AgnosticSearchResult>;\r\n}\r\nexport declare const facetGetters: ExtendedSearchGetters;\r\nexport {};\r\n//# sourceMappingURL=facetGetters.d.ts.map"}}
