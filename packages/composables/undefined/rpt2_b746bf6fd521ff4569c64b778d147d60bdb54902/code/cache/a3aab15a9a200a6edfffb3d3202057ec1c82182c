{"code":"import { __awaiter, __generator } from \"tslib\";\r\nimport { sharedRef, Logger, configureFactoryParams } from '@vue-storefront/core';\r\nimport { computed } from '@vue/composition-api';\r\nexport function usePaymentFactory(factoryParams) {\r\n    return function usePayment() {\r\n        var _this = this;\r\n        var methods = sharedRef([], 'usePayment-methods');\r\n        var loading = sharedRef(false, 'usePayment-loading');\r\n        var error = sharedRef({\r\n            set: null,\r\n            load: null\r\n        }, 'usePayment-error');\r\n        var _factoryParams = configureFactoryParams(factoryParams);\r\n        var load = function (searchParams) { return __awaiter(_this, void 0, void 0, function () {\r\n            var _a, err_1;\r\n            return __generator(this, function (_b) {\r\n                switch (_b.label) {\r\n                    case 0:\r\n                        Logger.debug('usePayment/load', searchParams);\r\n                        _b.label = 1;\r\n                    case 1:\r\n                        _b.trys.push([1, 3, 4, 5]);\r\n                        loading.value = true;\r\n                        _a = methods;\r\n                        return [4 /*yield*/, _factoryParams.load(searchParams)];\r\n                    case 2:\r\n                        _a.value = _b.sent();\r\n                        error.value.load = null;\r\n                        return [3 /*break*/, 5];\r\n                    case 3:\r\n                        err_1 = _b.sent();\r\n                        error.value.load = err_1;\r\n                        Logger.error('usePayment/load', err_1);\r\n                        return [3 /*break*/, 5];\r\n                    case 4:\r\n                        loading.value = false;\r\n                        return [7 /*endfinally*/];\r\n                    case 5: return [2 /*return*/];\r\n                }\r\n            });\r\n        }); };\r\n        var set = function (searchParams) { return __awaiter(_this, void 0, void 0, function () {\r\n            var selectedMethod, err_2;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        Logger.debug('usePayment/set', searchParams);\r\n                        _a.label = 1;\r\n                    case 1:\r\n                        _a.trys.push([1, 3, 4, 5]);\r\n                        loading.value = true;\r\n                        return [4 /*yield*/, _factoryParams.set(searchParams)];\r\n                    case 2:\r\n                        selectedMethod = _a.sent();\r\n                        error.value.set = null;\r\n                        return [2 /*return*/, selectedMethod];\r\n                    case 3:\r\n                        err_2 = _a.sent();\r\n                        error.value.set = err_2;\r\n                        Logger.error('usePayment/set', err_2);\r\n                        return [3 /*break*/, 5];\r\n                    case 4:\r\n                        loading.value = false;\r\n                        return [7 /*endfinally*/];\r\n                    case 5: return [2 /*return*/];\r\n                }\r\n            });\r\n        }); };\r\n        return {\r\n            set: set,\r\n            load: load,\r\n            loading: computed(function () { return loading.value; }),\r\n            methods: computed(function () { return methods.value; }),\r\n            error: computed(function () { return error.value; })\r\n        };\r\n    };\r\n}\r\n//# sourceMappingURL=usePaymentFactory.js.map","references":["/home/eb/projs/eecommerce.web/ecommerce.web/node_modules/@vue-storefront/core/lib/src/index.d.ts","/home/eb/projs/eecommerce.web/ecommerce.web/node_modules/@vue-storefront/vendure-api/lib/index.d.ts","/home/eb/projs/eecommerce.web/ecommerce.web/node_modules/@vue/composition-api/dist/index.d.ts","/home/eb/projs/eecommerce.web/ecommerce.web/packages/composables/src/types/index.ts"],"map":"{\"version\":3,\"file\":\"usePaymentFactory.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../src/factories/usePaymentFactory.ts\"],\"names\":[],\"mappings\":\";AAAA,OAAO,EAAuC,SAAS,EAAE,MAAM,EAAE,sBAAsB,EAAoB,MAAM,sBAAsB,CAAC;AAExI,OAAO,EAAO,QAAQ,EAAE,MAAM,sBAAsB,CAAC;AAqBrD,MAAM,UAAU,iBAAiB,CAC/B,aAA+C;IAE/C,OAAO,SAAS,UAAU;QAAnB,iBAgDN;QA/CC,IAAM,OAAO,GAAiB,SAAS,CAAC,EAAE,EAAE,oBAAoB,CAAC,CAAC;QAClE,IAAM,OAAO,GAAG,SAAS,CAAC,KAAK,EAAE,oBAAoB,CAAC,CAAC;QACvD,IAAM,KAAK,GAA0B,SAAS,CAAC;YAC7C,GAAG,EAAE,IAAI;YACT,IAAI,EAAE,IAAI;SACX,EAAE,kBAAkB,CAAC,CAAC;QAEvB,IAAM,cAAc,GAAG,sBAAsB,CAAC,aAAa,CAAC,CAAC;QAE7D,IAAM,IAAI,GAAG,UAAO,YAAa;;;;;wBAC/B,MAAM,CAAC,KAAK,CAAC,iBAAiB,EAAE,YAAY,CAAC,CAAC;;;;wBAG5C,OAAO,CAAC,KAAK,GAAG,IAAI,CAAC;wBACrB,KAAA,OAAO,CAAA;wBAAS,qBAAM,cAAc,CAAC,IAAI,CAAC,YAAY,CAAC,EAAA;;wBAAvD,GAAQ,KAAK,GAAG,SAAuC,CAAC;wBACxD,KAAK,CAAC,KAAK,CAAC,IAAI,GAAG,IAAI,CAAC;;;;wBAExB,KAAK,CAAC,KAAK,CAAC,IAAI,GAAG,KAAG,CAAC;wBACvB,MAAM,CAAC,KAAK,CAAC,iBAAiB,EAAE,KAAG,CAAC,CAAC;;;wBAErC,OAAO,CAAC,KAAK,GAAG,KAAK,CAAC;;;;;aAEzB,CAAC;QAEF,IAAM,GAAG,GAAG,UAAO,YAAY;;;;;wBAC7B,MAAM,CAAC,KAAK,CAAC,gBAAgB,EAAE,YAAY,CAAC,CAAC;;;;wBAG3C,OAAO,CAAC,KAAK,GAAG,IAAI,CAAC;wBACE,qBAAM,cAAc,CAAC,GAAG,CAAC,YAAY,CAAC,EAAA;;wBAAvD,cAAc,GAAG,SAAsC;wBAC7D,KAAK,CAAC,KAAK,CAAC,GAAG,GAAG,IAAI,CAAC;wBACvB,sBAAO,cAAc,EAAC;;;wBAEtB,KAAK,CAAC,KAAK,CAAC,GAAG,GAAG,KAAG,CAAC;wBACtB,MAAM,CAAC,KAAK,CAAC,gBAAgB,EAAE,KAAG,CAAC,CAAC;;;wBAEpC,OAAO,CAAC,KAAK,GAAG,KAAK,CAAC;;;;;aAEzB,CAAC;QAEF,OAAO;YACL,GAAG,KAAA;YACH,IAAI,MAAA;YACJ,OAAO,EAAE,QAAQ,CAAC,cAAM,OAAA,OAAO,CAAC,KAAK,EAAb,CAAa,CAAC;YACtC,OAAO,EAAE,QAAQ,CAAC,cAAM,OAAA,OAAO,CAAC,KAAK,EAAb,CAAa,CAAC;YACtC,KAAK,EAAE,QAAQ,CAAC,cAAM,OAAA,KAAK,CAAC,KAAK,EAAX,CAAW,CAAC;SACnC,CAAC;IACJ,CAAC,CAAC;AACJ,CAAC\"}","dtsmap":{"name":"/home/eb/projs/eecommerce.web/ecommerce.web/packages/composables/lib/factories/usePaymentFactory.d.ts.map","writeByteOrderMark":false,"text":"{\"version\":3,\"file\":\"usePaymentFactory.d.ts\",\"sourceRoot\":\"\",\"sources\":[\"../../src/factories/usePaymentFactory.ts\"],\"names\":[],\"mappings\":\"AAAA,OAAO,EAAE,WAAW,EAAE,OAAO,EAAE,aAAa,EAA6C,gBAAgB,EAAE,MAAM,sBAAsB,CAAC;AACxI,OAAO,EAAE,YAAY,EAAE,MAAM,6BAA6B,CAAC;AAE3D,OAAO,EAAE,KAAK,EAAE,KAAK,EAAE,MAAM,UAAU,CAAC;AAExC,MAAM,WAAW,gBAAgB;IAC/B,GAAG,EAAE,KAAK,CAAC;IACX,IAAI,EAAE,KAAK,CAAC;CACb;AAED,MAAM,WAAW,uBAAuB,CAAC,OAAO,CAAE,SAAQ,aAAa;IACrE,GAAG,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,MAAM,EAAE,YAAY,GAAG;QAAE,WAAW,CAAC,EAAE,WAAW,CAAA;KAAE,KAAK,OAAO,CAAC,KAAK,CAAC,CAAC;IAChG,IAAI,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,MAAM,CAAC,EAAE;QAAE,WAAW,CAAC,EAAE,WAAW,CAAA;KAAE,KAAK,OAAO,CAAC,OAAO,CAAC,CAAC;CACtF;AAED,MAAM,WAAW,UAAU,CAAC,OAAO;IACjC,OAAO,EAAE,gBAAgB,CAAC,OAAO,CAAC,CAAC;IACnC,GAAG,CAAC,MAAM,EAAE,YAAY,GAAG;QAAE,WAAW,CAAC,EAAE,WAAW,CAAA;KAAE,GAAG,OAAO,CAAC,IAAI,CAAC,CAAC;IACzE,IAAI,CAAC,MAAM,CAAC,EAAE;QAAE,WAAW,CAAC,EAAE,WAAW,CAAA;KAAE,GAAG,OAAO,CAAC,IAAI,CAAC,CAAC;IAC5D,OAAO,EAAE,gBAAgB,CAAC,OAAO,CAAC,CAAC;IACnC,KAAK,EAAE,gBAAgB,CAAC,gBAAgB,CAAC,CAAC;CAC3C;AAED,wBAAgB,iBAAiB,CAAC,OAAO,GAAG,GAAG,EAC7C,aAAa,EAAE,uBAAuB,CAAC,OAAO,CAAC,SAEjB,WAAW,OAAO,CAAC,CAiDlD\"}"},"dts":{"name":"/home/eb/projs/eecommerce.web/ecommerce.web/packages/composables/lib/factories/usePaymentFactory.d.ts","writeByteOrderMark":false,"text":"import { CustomQuery, Context, FactoryParams, ComputedProperty } from '@vue-storefront/core';\r\nimport { PaymentInput } from '@vue-storefront/vendure-api';\r\nimport { Error, Order } from '../types';\r\nexport interface UsePaymentErrors {\r\n    set: Error;\r\n    load: Error;\r\n}\r\nexport interface UsePaymentFactoryParams<PAYMENT> extends FactoryParams {\r\n    set: (context: Context, params: PaymentInput & {\r\n        customQuery?: CustomQuery;\r\n    }) => Promise<Order>;\r\n    load: (context: Context, params?: {\r\n        customQuery?: CustomQuery;\r\n    }) => Promise<PAYMENT>;\r\n}\r\nexport interface UsePayment<PAYMENT> {\r\n    methods: ComputedProperty<PAYMENT>;\r\n    set(params: PaymentInput & {\r\n        customQuery?: CustomQuery;\r\n    }): Promise<void>;\r\n    load(params?: {\r\n        customQuery?: CustomQuery;\r\n    }): Promise<void>;\r\n    loading: ComputedProperty<boolean>;\r\n    error: ComputedProperty<UsePaymentErrors>;\r\n}\r\nexport declare function usePaymentFactory<PAYMENT = any>(factoryParams: UsePaymentFactoryParams<PAYMENT>): () => UsePayment<PAYMENT>;\r\n//# sourceMappingURL=usePaymentFactory.d.ts.map"}}
