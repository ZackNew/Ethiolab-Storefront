{"code":"import { __awaiter, __generator } from \"tslib\";\r\nimport { sharedRef, Logger, configureFactoryParams } from '@vue-storefront/core';\r\nimport { computed } from '@vue/composition-api';\r\nexport function useCategoryFactory(factoryParams) {\r\n    return function useCategory(id) {\r\n        var _this = this;\r\n        var categories = sharedRef({}, \"useCategory-categories-\" + id);\r\n        var loading = sharedRef(false, \"useCategory-loading-\" + id);\r\n        var error = sharedRef({\r\n            search: null\r\n        }, \"useCategory-error-\" + id);\r\n        var _factoryParams = configureFactoryParams(factoryParams);\r\n        var search = function (searchParams) { return __awaiter(_this, void 0, void 0, function () {\r\n            var _a, err_1;\r\n            return __generator(this, function (_b) {\r\n                switch (_b.label) {\r\n                    case 0:\r\n                        Logger.debug(\"useCategory/\" + id + \"/search\", searchParams);\r\n                        _b.label = 1;\r\n                    case 1:\r\n                        _b.trys.push([1, 3, 4, 5]);\r\n                        loading.value = true;\r\n                        _a = categories;\r\n                        return [4 /*yield*/, _factoryParams.categorySearch(searchParams)];\r\n                    case 2:\r\n                        _a.value = _b.sent();\r\n                        error.value.search = null;\r\n                        return [3 /*break*/, 5];\r\n                    case 3:\r\n                        err_1 = _b.sent();\r\n                        error.value.search = err_1;\r\n                        Logger.error(\"useCategory/\" + id + \"/search\", err_1);\r\n                        return [3 /*break*/, 5];\r\n                    case 4:\r\n                        loading.value = false;\r\n                        return [7 /*endfinally*/];\r\n                    case 5: return [2 /*return*/];\r\n                }\r\n            });\r\n        }); };\r\n        return {\r\n            search: search,\r\n            loading: computed(function () { return loading.value; }),\r\n            categories: computed(function () { return categories.value; }),\r\n            error: computed(function () { return error.value; })\r\n        };\r\n    };\r\n}\r\n//# sourceMappingURL=useCategoryFactory.js.map","references":["/home/eb/projs/eecommerce.web/ecommerce.web/node_modules/@vue-storefront/core/lib/src/index.d.ts","/home/eb/projs/eecommerce.web/ecommerce.web/node_modules/@vue/composition-api/dist/index.d.ts"],"map":"{\"version\":3,\"file\":\"useCategoryFactory.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../src/factories/useCategoryFactory.ts\"],\"names\":[],\"mappings\":\";AAAA,OAAO,EAA0D,SAAS,EAAE,MAAM,EAAE,sBAAsB,EAA4C,MAAM,sBAAsB,CAAC;AACnL,OAAO,EAAO,QAAQ,EAAE,MAAM,sBAAsB,CAAC;AAgBrD,MAAM,UAAU,kBAAkB,CAChC,aAAyE;IAEzE,OAAO,SAAS,WAAW,CAAC,EAAU;QAA/B,iBA8BN;QA7BC,IAAM,UAAU,GAAkB,SAAS,CAAC,EAAE,EAAE,4BAA0B,EAAI,CAAC,CAAC;QAChF,IAAM,OAAO,GAAG,SAAS,CAAC,KAAK,EAAE,yBAAuB,EAAI,CAAC,CAAC;QAC9D,IAAM,KAAK,GAA2B,SAAS,CAAC;YAC9C,MAAM,EAAE,IAAI;SACb,EAAE,uBAAqB,EAAI,CAAC,CAAC;QAE9B,IAAM,cAAc,GAAG,sBAAsB,CAAC,aAAa,CAAC,CAAC;QAE7D,IAAM,MAAM,GAAG,UAAO,YAAY;;;;;wBAChC,MAAM,CAAC,KAAK,CAAC,iBAAe,EAAE,YAAS,EAAE,YAAY,CAAC,CAAC;;;;wBAGrD,OAAO,CAAC,KAAK,GAAG,IAAI,CAAC;wBACrB,KAAA,UAAU,CAAA;wBAAS,qBAAM,cAAc,CAAC,cAAc,CAAC,YAAY,CAAC,EAAA;;wBAApE,GAAW,KAAK,GAAG,SAAiD,CAAC;wBACrE,KAAK,CAAC,KAAK,CAAC,MAAM,GAAG,IAAI,CAAC;;;;wBAE1B,KAAK,CAAC,KAAK,CAAC,MAAM,GAAG,KAAG,CAAC;wBACzB,MAAM,CAAC,KAAK,CAAC,iBAAe,EAAE,YAAS,EAAE,KAAG,CAAC,CAAC;;;wBAE9C,OAAO,CAAC,KAAK,GAAG,KAAK,CAAC;;;;;aAEzB,CAAC;QAEF,OAAO;YACL,MAAM,QAAA;YACN,OAAO,EAAE,QAAQ,CAAC,cAAM,OAAA,OAAO,CAAC,KAAK,EAAb,CAAa,CAAC;YACtC,UAAU,EAAE,QAAQ,CAAC,cAAM,OAAA,UAAU,CAAC,KAAK,EAAhB,CAAgB,CAAC;YAC5C,KAAK,EAAE,QAAQ,CAAC,cAAM,OAAA,KAAK,CAAC,KAAK,EAAX,CAAW,CAAC;SACnC,CAAC;IACJ,CAAC,CAAC;AACJ,CAAC\"}","dtsmap":{"name":"/home/eb/projs/eecommerce.web/ecommerce.web/packages/composables/lib/factories/useCategoryFactory.d.ts.map","writeByteOrderMark":false,"text":"{\"version\":3,\"file\":\"useCategoryFactory.d.ts\",\"sourceRoot\":\"\",\"sources\":[\"../../src/factories/useCategoryFactory.ts\"],\"names\":[],\"mappings\":\"AAAA,OAAO,EAAE,WAAW,EAAE,OAAO,EAAE,aAAa,EAAE,iBAAiB,EAA6C,gBAAgB,EAAE,sBAAsB,EAAE,MAAM,sBAAsB,CAAC;AAGnL,MAAM,WAAW,wBAAwB,CACvC,QAAQ,EACR,sBAAsB,CACtB,SAAQ,aAAa;IACrB,cAAc,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,MAAM,EAAE,sBAAsB,GAAG;QAAE,WAAW,CAAC,EAAE,WAAW,CAAA;KAAE,KAAK,OAAO,CAAC,QAAQ,CAAC,CAAC;CACzH;AAED,MAAM,WAAW,WAAW,CAAC,QAAQ,EAAE,sBAAsB;IAC3D,UAAU,EAAE,gBAAgB,CAAC,QAAQ,CAAC,CAAC;IACvC,MAAM,CAAC,MAAM,EAAE,sBAAsB,CAAC,sBAAsB,CAAC,GAAG,OAAO,CAAC,IAAI,CAAC,CAAC;IAC9E,OAAO,EAAE,gBAAgB,CAAC,OAAO,CAAC,CAAC;IACnC,KAAK,EAAE,gBAAgB,CAAC,iBAAiB,CAAC,CAAC;CAC5C;AAED,wBAAgB,kBAAkB,CAAC,QAAQ,EAAE,sBAAsB,GAAG,GAAG,EACvE,aAAa,EAAE,wBAAwB,CAAC,QAAQ,EAAE,sBAAsB,CAAC,QAEzC,MAAM,KAAG,YAAY,QAAQ,EAAE,sBAAsB,CAAC,CA+BvF\"}"},"dts":{"name":"/home/eb/projs/eecommerce.web/ecommerce.web/packages/composables/lib/factories/useCategoryFactory.d.ts","writeByteOrderMark":false,"text":"import { CustomQuery, Context, FactoryParams, UseCategoryErrors, ComputedProperty, ComposableFunctionArgs } from '@vue-storefront/core';\r\nexport interface UseCategoryFactoryParams<CATEGORY, CATEGORY_SEARCH_PARAMS> extends FactoryParams {\r\n    categorySearch: (context: Context, params: CATEGORY_SEARCH_PARAMS & {\r\n        customQuery?: CustomQuery;\r\n    }) => Promise<CATEGORY>;\r\n}\r\nexport interface UseCategory<CATEGORY, CATEGORY_SEARCH_PARAMS> {\r\n    categories: ComputedProperty<CATEGORY>;\r\n    search(params: ComposableFunctionArgs<CATEGORY_SEARCH_PARAMS>): Promise<void>;\r\n    loading: ComputedProperty<boolean>;\r\n    error: ComputedProperty<UseCategoryErrors>;\r\n}\r\nexport declare function useCategoryFactory<CATEGORY, CATEGORY_SEARCH_PARAMS = any>(factoryParams: UseCategoryFactoryParams<CATEGORY, CATEGORY_SEARCH_PARAMS>): (id: string) => UseCategory<CATEGORY, CATEGORY_SEARCH_PARAMS>;\r\n//# sourceMappingURL=useCategoryFactory.d.ts.map"}}
