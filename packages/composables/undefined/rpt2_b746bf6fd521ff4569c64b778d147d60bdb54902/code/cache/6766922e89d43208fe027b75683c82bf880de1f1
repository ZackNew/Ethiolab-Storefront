{"code":"import { __awaiter, __generator } from \"tslib\";\r\nimport { useCartFactory } from '@vue-storefront/core';\r\n// Return types from Vendure mutations on Cart (Order) are unions of Order and something else (i.e. OrderModificationError).\r\n// When we return this union type, TypeScript complains that there are no properties in common with order as it returns only __typename.\r\n// So, in all mutations we have a return type of Promise<Order> and we are also casting the output i.e:\r\n// return response?.data?.X as Order\r\nvar params = {\r\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n    load: function (context, _a) {\r\n        var customQuery = _a.customQuery;\r\n        return __awaiter(void 0, void 0, void 0, function () {\r\n            var response;\r\n            var _b;\r\n            return __generator(this, function (_c) {\r\n                switch (_c.label) {\r\n                    case 0: return [4 /*yield*/, context.$vendure.api.getCart(customQuery)];\r\n                    case 1:\r\n                        response = _c.sent();\r\n                        return [2 /*return*/, (_b = response === null || response === void 0 ? void 0 : response.data) === null || _b === void 0 ? void 0 : _b.activeOrder];\r\n                }\r\n            });\r\n        });\r\n    },\r\n    // TODO: update to use currentCart\r\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n    addItem: function (context, _a) {\r\n        var currentCart = _a.currentCart, product = _a.product, quantity = _a.quantity, customQuery = _a.customQuery;\r\n        return __awaiter(void 0, void 0, void 0, function () {\r\n            var productVariantId, response;\r\n            var _b;\r\n            return __generator(this, function (_c) {\r\n                switch (_c.label) {\r\n                    case 0:\r\n                        productVariantId = (product === null || product === void 0 ? void 0 : product._variantId) || (product === null || product === void 0 ? void 0 : product._id) || (product === null || product === void 0 ? void 0 : product.productId);\r\n                        return [4 /*yield*/, context.$vendure.api.addToCart({ productVariantId: productVariantId, quantity: quantity }, customQuery)];\r\n                    case 1:\r\n                        response = _c.sent();\r\n                        return [2 /*return*/, (_b = response === null || response === void 0 ? void 0 : response.data) === null || _b === void 0 ? void 0 : _b.addItemToOrder];\r\n                }\r\n            });\r\n        });\r\n    },\r\n    // TODO: update to use currentCart\r\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n    removeItem: function (context, _a) {\r\n        var currentCart = _a.currentCart, product = _a.product, customQuery = _a.customQuery;\r\n        return __awaiter(void 0, void 0, void 0, function () {\r\n            var response;\r\n            var _b;\r\n            return __generator(this, function (_c) {\r\n                switch (_c.label) {\r\n                    case 0: return [4 /*yield*/, context.$vendure.api.removeFromCart({ orderLineId: product.id }, customQuery)];\r\n                    case 1:\r\n                        response = _c.sent();\r\n                        return [2 /*return*/, (_b = response === null || response === void 0 ? void 0 : response.data) === null || _b === void 0 ? void 0 : _b.removeOrderLine];\r\n                }\r\n            });\r\n        });\r\n    },\r\n    // TODO: update to use currentCart\r\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n    updateItemQty: function (context, _a) {\r\n        var currentCart = _a.currentCart, product = _a.product, quantity = _a.quantity, customQuery = _a.customQuery;\r\n        return __awaiter(void 0, void 0, void 0, function () {\r\n            var response;\r\n            var _b;\r\n            return __generator(this, function (_c) {\r\n                switch (_c.label) {\r\n                    case 0: return [4 /*yield*/, context.$vendure.api.updateCartQuantity({ orderLineId: product.id, quantity: quantity }, customQuery)];\r\n                    case 1:\r\n                        response = _c.sent();\r\n                        return [2 /*return*/, (_b = response === null || response === void 0 ? void 0 : response.data) === null || _b === void 0 ? void 0 : _b.adjustOrderLine];\r\n                }\r\n            });\r\n        });\r\n    },\r\n    // Not used in VSF for now\r\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n    clear: function (context, _a) {\r\n        var currentCart = _a.currentCart;\r\n        return __awaiter(void 0, void 0, void 0, function () {\r\n            return __generator(this, function (_b) {\r\n                console.log('Mocked: useCart.clear');\r\n                return [2 /*return*/, Promise.resolve({})];\r\n            });\r\n        });\r\n    },\r\n    // TODO: update to use currentCart\r\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n    applyCoupon: function (context, _a) {\r\n        var currentCart = _a.currentCart, couponCode = _a.couponCode, customQuery = _a.customQuery;\r\n        return __awaiter(void 0, void 0, void 0, function () {\r\n            var response;\r\n            var _b, _c, _d;\r\n            return __generator(this, function (_e) {\r\n                switch (_e.label) {\r\n                    case 0: return [4 /*yield*/, context.$vendure.api.applyCartCoupon({ couponCode: couponCode }, customQuery)];\r\n                    case 1:\r\n                        response = _e.sent();\r\n                        if ((_c = (_b = response === null || response === void 0 ? void 0 : response.data) === null || _b === void 0 ? void 0 : _b.applyCouponCode) === null || _c === void 0 ? void 0 : _c.errorCode) {\r\n                            return [2 /*return*/, {\r\n                                    updatedCart: currentCart\r\n                                }];\r\n                        }\r\n                        return [2 /*return*/, {\r\n                                updatedCart: (_d = response === null || response === void 0 ? void 0 : response.data) === null || _d === void 0 ? void 0 : _d.applyCouponCode,\r\n                                updatedCoupon: couponCode\r\n                            }];\r\n                }\r\n            });\r\n        });\r\n    },\r\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n    removeCoupon: function (context, _a) {\r\n        var couponCode = _a.couponCode, customQuery = _a.customQuery;\r\n        return __awaiter(void 0, void 0, void 0, function () {\r\n            var response;\r\n            var _b;\r\n            return __generator(this, function (_c) {\r\n                switch (_c.label) {\r\n                    case 0: return [4 /*yield*/, context.$vendure.api.removeCartCoupon({ couponCode: couponCode }, customQuery)];\r\n                    case 1:\r\n                        response = _c.sent();\r\n                        return [2 /*return*/, {\r\n                                updatedCart: (_b = response === null || response === void 0 ? void 0 : response.data) === null || _b === void 0 ? void 0 : _b.removeCouponCode\r\n                            }];\r\n                }\r\n            });\r\n        });\r\n    },\r\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n    isInCart: function (context, _a) {\r\n        var _b;\r\n        var currentCart = _a.currentCart, product = _a.product;\r\n        return Boolean((_b = currentCart === null || currentCart === void 0 ? void 0 : currentCart.lines) === null || _b === void 0 ? void 0 : _b.find(function (orderLine) { var _a, _b; return ((_a = orderLine === null || orderLine === void 0 ? void 0 : orderLine.productVariant) === null || _a === void 0 ? void 0 : _a.id) === product._id || ((_b = orderLine === null || orderLine === void 0 ? void 0 : orderLine.productVariant) === null || _b === void 0 ? void 0 : _b.id) === product._variantId; }));\r\n    }\r\n};\r\nexport var useCart = useCartFactory(params);\r\n//# sourceMappingURL=index.js.map","references":["/home/eb/projs/eecommerce.web/ecommerce.web/node_modules/@vue-storefront/core/lib/src/index.d.ts","/home/eb/projs/eecommerce.web/ecommerce.web/node_modules/@vue-storefront/vendure-api/lib/index.d.ts","/home/eb/projs/eecommerce.web/ecommerce.web/packages/composables/src/types/index.ts"],"map":"{\"version\":3,\"file\":\"index.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../src/composables/useCart/index.ts\"],\"names\":[],\"mappings\":\"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\"}","dtsmap":{"name":"/home/eb/projs/eecommerce.web/ecommerce.web/packages/composables/lib/composables/useCart/index.d.ts.map","writeByteOrderMark":false,"text":"{\"version\":3,\"file\":\"index.d.ts\",\"sourceRoot\":\"\",\"sources\":[\"../../../src/composables/useCart/index.ts\"],\"names\":[],\"mappings\":\"AAKA,OAAO,KAAK,EAEV,KAAK,EACL,SAAS,EACV,MAAM,6BAA6B,CAAC;AACrC,OAAO,EAAE,sBAAsB,EAAE,MAAM,aAAa,CAAC;AA+ErD,eAAO,MAAM,OAAO,6FAAmE,CAAC\"}"},"dts":{"name":"/home/eb/projs/eecommerce.web/ecommerce.web/packages/composables/lib/composables/useCart/index.d.ts","writeByteOrderMark":false,"text":"import type { Order, OrderLine } from '@vue-storefront/vendure-api';\r\nimport { AgnosticProductVariant } from '../../types';\r\nexport declare const useCart: () => import(\"@vue-storefront/core\").UseCart<Order, OrderLine, AgnosticProductVariant, any>;\r\n//# sourceMappingURL=index.d.ts.map"}}
